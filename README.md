<div class="Box-sc-g0xbh4-0 bJMeLZ js-snippet-clipboard-copy-unpositioned" data-hpc="true"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">制造本体</font></font></h1><a id="user-content-manufacturing-ontologies" class="anchor" aria-label="永久链接：制造本体" href="#manufacturing-ontologies"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></h2><a id="user-content-table-of-contents" class="anchor" aria-label="固定链接：目录" href="#table-of-contents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#introduction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#reference-solution-architecture"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考解决方案架构</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#ua-cloud-twin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云双胞胎</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#a-cloud-based-opc-ua-certificate-store-and-persisted-storage"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于云的 OPC UA 证书存储和持久存储</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#ua-cloud-library"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云图书馆</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#production-line-simulation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生产线模拟</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#calculating-the-product-carbon-footprint-pcf"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算产品碳足迹 (PCF)</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#digital-feedback-loop-with-ua-cloud-commander-and-ua-cloud-action"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有 UA Cloud Commander 和 UA Cloud Action 的数字反馈循环</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#installation-of-production-line-simulation-and-cloud-services"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装产线模拟及云服务</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#running-the-production-line-simulation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行生产线模拟</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#enabling-the-kubernetes-cluster-for-management-via-azure-arc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过 Azure Arc 启用 Kubernetes 集群管理</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#deploying-azure-iot-operations-on-the-edge"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在边缘部署 Azure IoT 操作</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#condition-monitoring-calculating-oee-detecting-anomalies-and-making-predictions-in-azure-data-explorer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Azure 数据资源管理器中进行状态监控、计算 OEE、检测异常并进行预测</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#rendering-the-built-in-unified-namespace-uns-and-isa-95-model-graph-in-kusto-explorer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Kusto Explorer 中渲染内置统一命名空间 (UNS) 和 ISA-95 模型图</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#using-azure-managed-grafana-service"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Azure 托管 Grafana 服务</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#enabling-the-product-carbon-footprint-calculation-pcf-in-the-asset-admin-shell-aas-repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Asset Admin Shell (AAS) 存储库中启用产品碳足迹计算 (PCF)</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#connecting-the-reference-solution-to-microsoft-power-bi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将参考解决方案连接到 Microsoft Power BI</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#connecting-the-reference-solution-to-microsoft-dynamics-365-field-service"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将参考解决方案连接到 Microsoft Dynamics 365 Field Service</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#a-turn-key-alternative-microsoft-fabric"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交钥匙替代方案：Microsoft Fabric</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#connecting-the-reference-solution-to-on-premises-sap-systems"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将参考解决方案连接到本地 SAP 系统</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#replacing-the-production-line-simulation-with-a-real-production-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用真实生产线代替模拟生产线</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#enabling-automatic-asset-onboarding-with-azure-openai-service"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Azure OpenAI 服务启用自动资产载入</font></font></a></li>
<li><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies?tab=readme-ov-file#license"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执照</font></font></a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍</font></font></h2><a id="user-content-introduction" class="anchor" aria-label="永久链接：简介" href="#introduction"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本体定义了用于描述系统的语言。在制造领域，这些系统可以代表工厂或工厂，也可以代表企业应用程序或供应链。制造领域有几个已建立的本体。其中大多数早已标准化。在此存储库中，我们重点关注其中两个本体，即描述工厂本体的 ISA95 和描述制造供应链的 IEC 63278 资产管理外壳。此外，我们还提供了工厂模拟和端到端解决方案架构，供您利用 IEC 62541 OPC UA 和 Microsoft Azure 云来尝试本体。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字孪生定义语言</font></font></h3><a id="user-content-digital-twin-definition-language" class="anchor" aria-label="永久链接：数字孪生定义语言" href="#digital-twin-definition-language"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此存储库中定义的本体是通过利用</font></font><a href="https://github.com/Azure/opendigitaltwins-dtdl/blob/master/DTDL/v2/DTDL.v2.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定的数字孪生定义语言 (DTDL) 来描述的。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W3C 物联网</font></font></h3><a id="user-content-w3c-web-of-things" class="anchor" aria-label="永久链接：W3C 物联网" href="#w3c-web-of-things"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"></font><a href="https://www.w3.org/TR/wot-thing-description/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此存储库中定义的本体也通过利用此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定的 W3C 物联网 (WoT) 进行描述</font><font style="vertical-align: inherit;">。它们是</font></font><a href="https://github.com/web-of-things-open-source/wot-dtdl-converter"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供的开源 DTDL-WoT 转换工具生成的</font><font style="vertical-align: inherit;">。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">国际自动化学会 95 (ISA-95/IEC 62264)</font></font></h3><a id="user-content-international-society-of-automation-95-isa-95iec-62264" class="anchor" aria-label="永久链接：国际自动化协会 95 (ISA-95/IEC 62264)" href="#international-society-of-automation-95-isa-95iec-62264"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISA95 / IEC 62264 是该解决方案利用的本体之一。它是一个标准，</font></font><a href="https://en.wikipedia.org/wiki/ANSI/ISA-95" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://en.wikipedia.org/wiki/IEC_62264" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行了描述。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEC 63278 资产管理外壳 (AAS)</font></font></h3><a id="user-content-iec-63278-asset-administration-shell-aas" class="anchor" aria-label="永久链接：IEC 63278 资产管理外壳 (AAS)" href="#iec-63278-asset-administration-shell-aas"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEC 63278 资产管理外壳 (AAS) 支持沿着制造供应链进行供应商中立、平台独立的数据交换，并由该解决方案利用。</font></font><a href="https://www.plattform-i40.de/IP/Redaktion/EN/Standardartikel/specification-administrationshell.html" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述了该标准</font><font style="vertical-align: inherit;">。此存储库中提供的参考解决方案包含来自数字孪生联盟参考实现的 AAS 存储库</font></font><a href="https://github.com/digitaltwinconsortium/AAS-Repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">服务</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。该服务向客户提供模拟生产线生产的模拟产品的产品碳足迹（PCF）。请参阅下文了解如何启用此服务。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEC 62541 开放平台通信统一架构 (OPC UA)</font></font></h3><a id="user-content-iec-62541-open-platform-communications-unified-architecture-opc-ua" class="anchor" aria-label="永久链接：IEC 62541 开放平台通信统一架构 (OPC UA)" href="#iec-62541-open-platform-communications-unified-architecture-opc-ua"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该解决方案利用 IEC 62541 开放平台通信统一架构 (OPC UA) 来处理所有运营技术 (OT) 数据。</font></font><a href="https://opcfoundation.org" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述了该标准</font><font style="vertical-align: inherit;">。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考解决方案架构</font></font></h2><a id="user-content-reference-solution-architecture" class="anchor" aria-label="永久链接：参考解决方案架构" href="#reference-solution-architecture"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该存储库包含一个参考解决方案，利用上述本体并在 Microsoft Azure 上实施。通过在 UA Cloud Twin 应用程序中实现开放接口 IDigitalTwin，可以轻松添加其他实现。</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/architecturesimple.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/architecturesimple.png" alt="建筑学" width="900" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">详细架构：</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/architecture.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/architecture.png" alt="建筑学" width="900" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是该解决方案涉及的组件：</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成分</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工业资产</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一组托管在 Docker 容器中的模拟 OPC-UA 生产线</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/iot-operations/get-started/overview-iot-operations" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 物联网运营</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure IoT Operations 是边缘的统一数据平面。它由一组模块化、可扩展且高度可用的数据服务组成，这些服务在启用 Azure Arc 的边缘 Kubernetes 集群上运行。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/barnstee/ua-cloudpublisher"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云发布商</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该开源参考应用程序将 OPC UA 客户端/服务器请求转换为 OPC UA PubSub 云消息。它托管在 Docker 容器中。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/opcfoundation/ua-cloudcommander"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云指挥官</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此开源参考应用程序将发送到 MQTT 或 Kafka 代理（可能在云端）的消息转换为对连接的 OPC UA 服务器的 OPC UA 客户端/服务器请求。它托管在 Docker 容器中。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/OPCFoundation/UA-EdgeTranslator"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA 边缘转换器</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此开源工业连接参考应用程序将专有资产接口转换为 OPC UA，利用 W3C 物联网 (WoT) 事物描述作为描述工业资产接口的架构。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/logic-apps/logic-apps-gateway-install#how-the-gateway-works" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据网关</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此网关将本地数据源（如 SAP）连接到云中的 Azure 逻辑应用。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/aks/hybrid/aks-edge-overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AKS 边缘要点</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此 Kubernetes 实现（支持 K3S 和 K8S）在边缘运行，并为嵌入式或 PC 级硬件（如工业网关）上的容错边缘配置提供单节点和多节点 Kubernetes 集群。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/event-hubs/event-hubs-about" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 事件中心</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">云消息代理，从边缘网关接收 OPC UA PubSub 消息并存储它们，直到它们被 UA Cloud Twin 等订阅者检索。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/digitaltwinconsortium/UA-CloudTwin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云双胞胎</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此开源参考云应用程序将 OPC UA PubSub 云消息转换为数字孪生更新。它还通过处理云消息自动创建数字孪生。双胞胎是从 ISA95 兼容的 DTDL 本体中的模型实例化的。它托管在 Docker 容器中。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/synapse-analytics/data-explorer/data-explorer-overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 数据资源管理器</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于高级云分析的时间序列数据库和前端仪表板服务，包括内置异常检测和预测。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/logic-apps/logic-apps-overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 逻辑应用</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 逻辑应用是一个云平台，可用于创建和运行自动化工作流，几乎不需要任何代码。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/digitaltwinconsortium/UA-CloudAction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云行动</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此开源参考云应用程序查询 Azure 数据资源管理器以获取特定数据值（其中一台模拟生产线机器中的压力），并在达到特定阈值 (4000 mbar) 时通过 Azure 事件中心调用 UA Cloud Commander。然后，UA Cloud Commander 通过 OPC UA 调用计算机上的 OpenPressureReliefValve 方法。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/azure-arc/kubernetes/overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">蔚蓝弧线</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该云服务用于管理边缘的本地 Kubernetes 集群。新的工作负载可以通过 Flux 部署。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/storage/common/storage-introduction" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure存储</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此云服务用于管理 OPC UA 证书存储和 Edge Kubernetes 工作负载的设置。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies#condition-monitoring-calculating-oee-detecting-anomalies-and-making-predictions-in-azure-data-explorer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 数据资源管理器仪表板</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该云应用程序允许为您的制造数据创建 2D 查看器。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/digitaltwinconsortium/AAS-Repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资产管理外壳存储库</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此开源参考 REST Web 服务和应用程序允许您托管资产管理 Shell，其中包含以机器可读格式提供给客户的产品信息。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/admin-shell-io/aasx-package-explorer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AASX 包浏览器</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此应用程序允许您在 PC 上查看和修改资产管理 Shell。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/OPCFoundation/UA-CloudMetaverse"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云元宇宙</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个开源 Industrial Metaverse 参考应用程序允许您通过增强现实或虚拟现实耳机查看制造资产的数字孪生。工作正在进行中！</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies/blob/main/Tools/MicrosoftSustainabilityManager/configuremsm.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微软可持续发展经理</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Sustainability Manager 是一个可扩展的解决方案，它统一了数据智能，并为处于可持续发展之旅任何阶段的组织提供全面、集成和自动化的可持续发展管理。它使手动流程自动化，使组织能够更有效地记录、报告和减少排放。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/managed-grafana/overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 托管 Grafana</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 托管 Grafana 是 Grafana Labs 在 Grafana 软件之上构建的数据可视化平台。它构建为由 Mi&ZeroWidthSpace;&ZeroWidthSpace;crosoft 运营和支持的完全托管的 Azure 服务。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/azure/cognitive-services/openai/overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure OpenAI 服务</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure OpenAI 服务提供对 OpenAI 强大语言模型（包括 GPT-4、GPT-35-Turbo 和 Embeddings 模型系列）的 REST API 访问。</font></font></td>
</tr>
<tr>
<td><a href="https://github.com/OPCFoundation/UA-CloudLibrary"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云图书馆</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA 云库是 OPC UA 信息模型的在线商店，由 OPC 基金会</font></font><a href="https://uacloudlibrary.opcfoundation.org/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">托管。</font></font></td>
</tr>
<tr>
<td><a href="https://www.watttime.org/api-documentation/#introduction" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">瓦特时间服务</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WattTime 服务可用于获取制造过程中消耗的单位电能的碳强度，特定于传递到服务中的特定地理坐标。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/power-bi/fundamentals/power-bi-overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微软Power BI</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Power BI 是 SaaS 软件服务、应用程序和连接器的集合，它们协同工作，将不相关的数据源转变为连贯、视觉沉浸式和交互式见解。</font></font></td>
</tr>
<tr>
<td><a href="https://learn.microsoft.com/en-us/dynamics365/field-service/overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微软Dynamics 365现场服务</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Dynamics 365 Field Service 是用于管理现场服务请求的统包 SaaS 解决方案。</font></font></td>
</tr>
</tbody>
</table>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">❗ 在现实世界的部署中，像打开泄压阀这样重要的事情当然会在本地完成，这只是如何实现数字反馈循环的一个简单示例。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下是数据流步骤：</font></font></p>
<ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA Cloud Publisher 从每个模拟工厂读取 OPC UA 数据，并通过 OPC UA PubSub 将其转发到 Azure 事件中心。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 数据资源管理器从 Azure 事件中心读取和处理 OPC UA 数据，并生成时间序列数据，可用于分析，例如</font></font><a href="https://www.oee.com" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OEE（整体设备效率）</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算和预测维护场景。</font></font></li>
</ol>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云双胞胎</font></font></h2><a id="user-content-ua-cloud-twin" class="anchor" aria-label="永久链接：UA 云双胞胎" href="#ua-cloud-twin"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该解决方案利用了数字孪生联盟也提供的 UA Cloud </font></font><a href="https://github.com/digitaltwinconsortium/UA-CloudTwin"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Twin</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。它将 ISA-95 本体模型上传到 Azure 数据资源管理器。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于云的 OPC UA 证书存储和持久存储</font></font></h2><a id="user-content-a-cloud-based-opc-ua-certificate-store-and-persisted-storage" class="anchor" aria-label="永久链接：基于云的 OPC UA 证书存储和持久存储" href="#a-cloud-based-opc-ua-certificate-store-and-persisted-storage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行 OPC UA 应用程序时，必须保留其 OPC UA 配置文件、密钥和证书。虽然 Kubernetes 能够将这些文件持久保存在卷中，但对它们来说更安全的地方是云，特别是在单节点集群上，当节点发生故障时卷将丢失。这就是该解决方案中使用的 OPC UA 应用程序（即 UA Cloud Publisher、MES 和模拟机/生产线站）将其配置文件、密钥和证书存储在云端的原因。这还具有为所有 OPC UA 应用程序提供相互信任的证书的单一位置的优点。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UA云图书馆</font></font></h2><a id="user-content-ua-cloud-library" class="anchor" aria-label="永久链接：UA云图书馆" href="#ua-cloud-library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此参考解决方案中使用的资产管理外壳存储库会自动从 UA 云库读取资产管理外壳中描述的产品引用的 OPC UA 信息模型。您还可以直接从 Azure 数据资源管理器（也在本参考解决方案中使用）读取 OPC UA 信息模型，并将 OPC UA 信息模型中定义的 OPC UA 节点导入到表中，以便在查询中查找其他元数据。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，通过在 ADX 群集上运行以下查询来配置 UA 云库的 Azure 数据资源管理器标注策略（确保您是 ADX 群集管理员，可在 Azure 门户的 ADX 选项卡中的“权限”下进行配置）：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code>    .alter cluster policy callout @'[{"CalloutType": "webapi","CalloutUriRegex": "uacloudlibrary.opcfoundation.org","CanCall": true}]'
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="    .alter cluster policy callout @'[{&quot;CalloutType&quot;: &quot;webapi&quot;,&quot;CalloutUriRegex&quot;: &quot;uacloudlibrary.opcfoundation.org&quot;,&quot;CanCall&quot;: true}]'" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，只需从 Azure 门户运行以下 Azure 数据资源管理器查询：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code>    let uri='https://uacloudlibrary.opcfoundation.org/infomodel/download/&lt;insert information model identifier from the UA Cloud Library here&gt;';
    let headers=dynamic({'accept':'text/plain'});
    let options=dynamic({'Authorization':'Basic &lt;insert your cloud library credentials hash here&gt;'});
    evaluate http_request(uri, headers, options)
    | project title = tostring(ResponseBody.['title']), contributor = tostring(ResponseBody.contributor.name), nodeset = parse_xml(tostring(ResponseBody.nodeset.nodesetXml))
    | mv-expand UAVariable=nodeset.UANodeSet.UAVariable
    | project-away nodeset
    | extend NodeId = UAVariable.['@NodeId'], DisplayName = tostring(UAVariable.DisplayName.['#text']), BrowseName = tostring(UAVariable.['@BrowseName']), DataType = tostring(UAVariable.['@DataType'])
    | project-away UAVariable
    | take 10000
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="    let uri='https://uacloudlibrary.opcfoundation.org/infomodel/download/<insert information model identifier from the UA Cloud Library here>';
    let headers=dynamic({'accept':'text/plain'});
    let options=dynamic({'Authorization':'Basic <insert your cloud library credentials hash here>'});
    evaluate http_request(uri, headers, options)
    | project title = tostring(ResponseBody.['title']), contributor = tostring(ResponseBody.contributor.name), nodeset = parse_xml(tostring(ResponseBody.nodeset.nodesetXml))
    | mv-expand UAVariable=nodeset.UANodeSet.UAVariable
    | project-away nodeset
    | extend NodeId = UAVariable.['@NodeId'], DisplayName = tostring(UAVariable.DisplayName.['#text']), BrowseName = tostring(UAVariable.['@BrowseName']), DataType = tostring(UAVariable.['@DataType'])
    | project-away UAVariable
    | take 10000" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您需要在上面的查询中提供两件事：</font></font></p>
<ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来自 UA 云库的信息模型的唯一 ID，并将其输入到 ADX 查询字段中。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您的 UA Cloud Library 凭据（在注册期间生成）基本授权标头哈希并将其插入 ADX 查询的字段中。使用</font></font><a href="https://www.debugbear.com/basic-auth-header-generator" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://www.debugbear.com/basic-auth-header-generator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等工具</font><font style="vertical-align: inherit;">来生成它。</font></font></li>
</ol>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，要在可</font></font><a href="https://learn.microsoft.com/en-us/azure/data-explorer/kusto/tools/kusto-explorer" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载的 Kusto Explorer 工具中渲染生产线模拟站 OPC UA 服务器的信息模型，请运行以下查询：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code>let uri='https://uacloudlibrary.opcfoundation.org/infomodel/download/1627266626';
let headers=dynamic({'accept':'text/plain'});
let options=dynamic({'Authorization':'Basic &lt;insert your cloud library credentials hash here&gt;'});
let variables = evaluate http_request(uri, headers, options)
    | project title = tostring(ResponseBody.['title']), contributor = tostring(ResponseBody.contributor.name), nodeset = parse_xml(tostring(ResponseBody.nodeset.nodesetXml))
    | mv-expand UAVariable = nodeset.UANodeSet.UAVariable
    | extend NodeId = UAVariable.['@NodeId'], ParentNodeId = UAVariable.['@ParentNodeId'], DisplayName = tostring(UAVariable['DisplayName']), DataType = tostring(UAVariable.['@DataType']), References = tostring(UAVariable.['References'])
    | where References !contains "HasModellingRule"
    | where DisplayName != "InputArguments"
    | project-away nodeset, UAVariable, References;
let objects = evaluate http_request(uri, headers, options)
    | project title = tostring(ResponseBody.['title']), contributor = tostring(ResponseBody.contributor.name), nodeset = parse_xml(tostring(ResponseBody.nodeset.nodesetXml))
    | mv-expand UAObject = nodeset.UANodeSet.UAObject
    | extend NodeId = UAObject.['@NodeId'], ParentNodeId = UAObject.['@ParentNodeId'], DisplayName = tostring(UAObject['DisplayName']), References = tostring(UAObject.['References'])
    | where References !contains "HasModellingRule"
    | project-away nodeset, UAObject, References;
let nodes = variables
    | project source = tostring(NodeId), target = tostring(ParentNodeId), name = tostring(DisplayName)
    | join kind=fullouter (objects
        | project source = tostring(NodeId), target = tostring(ParentNodeId), name = tostring(DisplayName)) on source
        | project source = coalesce(source, source1), target = coalesce(target, target1), name = coalesce(name, name1);
let edges = nodes;
edges
    | make-graph source --&gt; target with nodes on source
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="let uri='https://uacloudlibrary.opcfoundation.org/infomodel/download/1627266626';
let headers=dynamic({'accept':'text/plain'});
let options=dynamic({'Authorization':'Basic <insert your cloud library credentials hash here>'});
let variables = evaluate http_request(uri, headers, options)
    | project title = tostring(ResponseBody.['title']), contributor = tostring(ResponseBody.contributor.name), nodeset = parse_xml(tostring(ResponseBody.nodeset.nodesetXml))
    | mv-expand UAVariable = nodeset.UANodeSet.UAVariable
    | extend NodeId = UAVariable.['@NodeId'], ParentNodeId = UAVariable.['@ParentNodeId'], DisplayName = tostring(UAVariable['DisplayName']), DataType = tostring(UAVariable.['@DataType']), References = tostring(UAVariable.['References'])
    | where References !contains &quot;HasModellingRule&quot;
    | where DisplayName != &quot;InputArguments&quot;
    | project-away nodeset, UAVariable, References;
let objects = evaluate http_request(uri, headers, options)
    | project title = tostring(ResponseBody.['title']), contributor = tostring(ResponseBody.contributor.name), nodeset = parse_xml(tostring(ResponseBody.nodeset.nodesetXml))
    | mv-expand UAObject = nodeset.UANodeSet.UAObject
    | extend NodeId = UAObject.['@NodeId'], ParentNodeId = UAObject.['@ParentNodeId'], DisplayName = tostring(UAObject['DisplayName']), References = tostring(UAObject.['References'])
    | where References !contains &quot;HasModellingRule&quot;
    | project-away nodeset, UAObject, References;
let nodes = variables
    | project source = tostring(NodeId), target = tostring(ParentNodeId), name = tostring(DisplayName)
    | join kind=fullouter (objects
        | project source = tostring(NodeId), target = tostring(ParentNodeId), name = tostring(DisplayName)) on source
        | project source = coalesce(source, source1), target = coalesce(target, target1), name = coalesce(name, name1);
let edges = nodes;
edges
    | make-graph source --> target with nodes on source" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了获得最佳结果，请将</font><font style="vertical-align: inherit;">选项更改</font></font><code>Layout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code>Grouped</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">。</font></font><code>Lables</code><font style="vertical-align: inherit;"></font><code>name</code><font style="vertical-align: inherit;"></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/stationgraph.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/stationgraph.png" alt="车站图" width="900" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生产线模拟</font></font></h2><a id="user-content-production-line-simulation" class="anchor" aria-label="永久链接：生产线模拟" href="#production-line-simulation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该解决方案利用由多个工作站组成的生产线模拟、OPC UA 信息模型以及简单的制造执行系统 &ZeroWidthSpace;&ZeroWidthSpace;(MES)。工作站和 MES 均采用集装箱化，易于部署。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认模拟配置</font></font></h3><a id="user-content-default-simulation-configuration" class="anchor" aria-label="永久链接：默认模拟配置" href="#default-simulation-configuration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模拟配置为包括 2 条生产线。默认配置如下所示：</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生产线</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">理想的循环时间（以秒为单位）</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">慕尼黑</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">西雅图</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10</font></font></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">班次名称</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结尾</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">早晨</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">07:00</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14:00</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下午</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15:00</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22:00</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">夜晚</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23:00</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">06:00</font></font></td>
</tr>
</tbody>
</table>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：轮班时间采用当地时间，即托管生产线模拟的虚拟机设置的时区！</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Station OPC UA 服务器的 OPC UA 节点 ID</font></font></h3><a id="user-content-opc-ua-node-ids-of-station-opc-ua-server" class="anchor" aria-label="永久链接：Station OPC UA 服务器的 OPC UA 节点 ID" href="#opc-ua-node-ids-of-station-opc-ua-server"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下 OPC UA 节点 ID 在 Station OPC UA 服务器中用于遥测到云</font></font></p>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=379 - 制造产品序列号</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=385 - 制造产品的数量</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=391 - 废弃产品数量</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=398 - 运行时间</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=399 - 错误时间</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=400 - 状态（0=工作站准备好工作，1=工作进行中，2=已完成工作并制造出合格零件，3=已完成工作并已制造报废，4=工作站处于故障状态）</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=406——能源消耗</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=412 - 理想的循环时间</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=418 - 实际循环时间</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i=434 - 压力</font></font></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计算产品碳足迹 (PCF)</font></font></h2><a id="user-content-calculating-the-product-carbon-footprint-pcf" class="anchor" aria-label="永久链接：计算产品碳足迹 (PCF)" href="#calculating-the-product-carbon-footprint-pcf"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资产管理外壳 (AAS) 最流行的用例之一是向这些产品的客户提供制造产品的产品碳足迹 (PCF)。事实上，AAS 很可能成为</font><font style="vertical-align: inherit;">欧盟即将推出的</font></font><a href="https://circulareconomy.europa.eu/platform/en/news-and-events/all-events/eu-digital-product-passport-learning-frontrunners" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字产品护照 (DPP)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">计划的基础技术。要计算 PCF，需要考虑所有三个排放范围（1、2 和 3）。请参阅</font></font><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies#enabling-the-product-carbon-footprint-calculation-pcf-in-the-asset-admin-shell-aas-repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，了解如何使 AAS 计算 PCF 并通过标准化 REST 接口向外部消费者提供 PCF，并参阅</font></font><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies/blob/main/Tools/MicrosoftSustainabilityManager/configuremsm.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，了解如何使 Microsoft Sustainability Manager (MSM) 计算 PCF。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围 1 排放</font></font></h3><a id="user-content-scope-1-emissions" class="anchor" aria-label="永久链接：范围 1 排放" href="#scope-1-emissions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些排放来自制造商用于燃烧化石燃料的所有来源，无论是在生产期间（例如当制造商采用天然气驱动的生产过程时）或之前（例如通过卡车拾取零件）或之后（例如汽车销售人员或运载生产产品的送货卡车）。它们相对容易计算，因为化石燃料动力发动机的排放量是众所周知的。该参考解决方案只是将范围 1 排放的固定值添加到产品总碳足迹中。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围 2 排放</font></font></h3><a id="user-content-scope-2-emissions" class="anchor" aria-label="永久链接：范围 2 排放" href="#scope-2-emissions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些排放来自生产过程中使用的电力。如果制造商使用 100% 可再生能源供应商，则范围 2 排放为零。然而，大多数制造商与能源供应商签订了长期合同，需要向能源供应商询问每千瓦时能源的碳强度。如果无法获得此数据，则应使用制造基地所在电网区域的平均值。这些数据可通过</font></font><a href="https://www.watttime.org" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WattTime</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等服务获得</font><font style="vertical-align: inherit;">，这就是该参考解决方案通过内置</font></font><a href="https://github.com/digitaltwinconsortium/AAS-Repository"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资产管理外壳存储库</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（也可从数字孪生联盟开源获得）使用的数据。请参阅下文了解如何在部署后配置参考解决方案的这一部分。 PCF计算首先检查生产线是否成功生产出新产品，检索生产产品的序列号，然后计算该机器生产新产品时生产线每台机器的能耗，然后应用碳强度为所有机器能耗的总和。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围 3 排放</font></font></h3><a id="user-content-scope-3-emissions" class="anchor" aria-label="永久链接：范围 3 排放" href="#scope-3-emissions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些排放量来自正在制造的产品中使用的零件和原材料，以及最终客户使用该产品（并首先将其送到客户手中！），并且是最难计算的，因为缺乏当今全球供应商制造商使用的数据。不幸的是，范围 3 排放几乎占制造业排放的 90%。然而，这正是 AAS 可以帮助创建标准化接口和数据模型来提供和检索范围 3 排放的地方。该参考解决方案正是通过为模拟生产线构建的每个制造产品提供 AAS 来实现这一点，并且还从模拟制造供应链的另一个 AAS 读取 PCF 数据。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有 UA Cloud Commander 和 UA Cloud Action 的数字反馈循环</font></font></h2><a id="user-content-digital-feedback-loop-with-ua-cloud-commander-and-ua-cloud-action" class="anchor" aria-label="永久链接：使用 UA Cloud Commander 和 UA Cloud Action 的数字反馈循环" href="#digital-feedback-loop-with-ua-cloud-commander-and-ua-cloud-action"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该参考实现实现了“数字反馈循环”，即根据达到特定阈值（模拟压力）的时间序列，在云模拟中的其中一个 OPC UA 服务器上触发命令。您可以在 Azure Data Explorer 仪表板中看到西雅图生产线中装配机的压力定期释放。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装产线模拟及云服务</font></font></h2><a id="user-content-installation-of-production-line-simulation-and-cloud-services" class="anchor" aria-label="固定链接：安装产线模拟和云服务" href="#installation-of-production-line-simulation-and-cloud-services"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击下面的按钮将</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有必需的资源（在 Microsoft Azure 上）：</font></font></p>
<p dir="auto"><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fdigitaltwinconsortium%2FManufacturingOntologies%2Fmain%2FDeployment%2Farm.json" rel="nofollow"><img src="https://camo.githubusercontent.com/f68e9807447c79c7af26ab524bd382c4946c10700f597db9dea7f5998b6747ac/68747470733a2f2f616b612e6d732f6465706c6f79746f617a757265627574746f6e" alt="部署到 Azure" data-canonical-src="https://aka.ms/deploytoazurebutton" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：在部署过程中，您必须为用于托管生产线模拟的虚拟机和 UA Cloud Twin 提供密码。密码必须包含以下 3 个字符：1 个小写字符、1 个大写字符、1 个数字和 1 个特殊字符。密码长度必须介于 12 到 72 个字符之间。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：为了节省成本，部署仅部署一个 Windows 11 Enterprise VM 用于生产线模拟和 Azure Kubernetes Services Edge Essentials 实例的基本操作系统。在生产场景中，显然不需要生产线模拟，对于 Azure Kubernetes Services Edge Essentials 实例的基础操作系统，我们推荐 Windows IoT Enterprise Long Term Servicing Channel (LTSC)。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署完成后，使用 RDP（远程桌面）连接连接到已部署的 Windows VM。可以在</font><font style="vertical-align: inherit;">VM 的</font></font><a href="https://portal.azure.com" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 门户页面的</font></font></a><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“连接”</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项下下载 RDP 文件。使用您在部署期间提供的凭据登录，打开</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 Powershell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，导航到该</font></font><code>C:\ManufacturingOntologies-main\Deployment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录并运行</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code>New-AksEdgeDeployment -JsonConfigFilePath .\aksedge-config.json
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="New-AksEdgeDeployment -JsonConfigFilePath .\aksedge-config.json" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令完成后，Azure Kubernetes Services Edge Essentials 安装完成，您可以运行生产线模拟。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：要随时从所有 Kubernetes 工作负载和服务获取日志，只需</font></font><code>Get-AksEdgeLogs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 Powershell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行即可。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：要检查 Kubernetes 集群的内存利用率，只需</font></font><code>Invoke-AksEdgeNodeCommand -Command "sudo cat /proc/meminfo"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 Powershell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行即可。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行生产线模拟</font></font></h2><a id="user-content-running-the-production-line-simulation" class="anchor" aria-label="永久链接：运行生产线模拟" href="#running-the-production-line-simulation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从部署的 VM 中，打开</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 命令提示符</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，导航到该</font></font><code>C:\ManufacturingOntologies-main\Tools\FactorySimulation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录并</font><font style="vertical-align: inherit;">通过提供以下参数来运行</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StartSimulation命令：</font></font></strong><font style="vertical-align: inherit;"></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">句法：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code>StartSimulation &lt;EventHubsCS&gt; &lt;StorageAccountCS&gt; &lt;AzureSubscriptionID&gt; &lt;AzureTenantID&gt;
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="StartSimulation <EventHubsCS> <StorageAccountCS> <AzureSubscriptionID> <AzureTenantID>" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数：</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">范围</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件中心CS</font></font></td>
<td><font style="vertical-align: inherit;"></font><a href="https://learn.microsoft.com/en-us/azure/event-hubs/event-hubs-get-connection-string" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按照此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述复制事件中心命名空间连接字符串</font><font style="vertical-align: inherit;">。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储帐户CS</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Azure 门户中，导航到此解决方案创建的存储帐户。从左侧导航菜单中选择“访问键”。然后，复制 key1 的连接字符串。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure订阅ID</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Azure 门户中，浏览订阅并复制此解决方案中使用的订阅的 ID。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure租户ID</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Azure 门户中，打开 Microsoft Entry ID 页面并复制租户 ID。</font></font></td>
</tr>
</tbody>
</table>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例： StartSimulation Endpoint=sb://ontologies.servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=abcdefgh= DefaultEndpointsProtocol=https;AccountName=ontologiesstorage;AccountKey=abcdefgh==;EndpointSuffix=core.windows.net 9dd2eft0-3dad -4aeb-85d8-c3adssd8127a 6e660ce4-d51a-4585-80c6-58035e212354</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：如果您有权访问多个 Azure 订阅，则值得首先通过 Web 浏览器从 VM 登录 Azure 门户。您还可以通过 Azure 门户 UI（位于右上角）切换 Active Directory 租户，以确保您登录到部署期间使用的租户。登录后，只需将浏览器窗口保持打开状态即可。这将确保 StartSimulation 脚本可以更轻松地连接到正确的订阅。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：在此解决方案中，UA Cloud Publisher 的 OPC UA 应用程序证书存储以及模拟生产线的 MES 和单个计算机的存储位于云中已部署的 Azure 存储帐户中。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过 Azure Arc 启用 Kubernetes 集群管理</font></font></h2><a id="user-content-enabling-the-kubernetes-cluster-for-management-via-azure-arc" class="anchor" aria-label="永久链接：通过 Azure Arc 启用 Kubernetes 集群进行管理" href="#enabling-the-kubernetes-cluster-for-management-via-azure-arc"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在虚拟机上，打开</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 PowerShell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，导航到该</font></font><code>C:\ManufacturingOntologies-main\Deployment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录并运行</font></font><code>CreateServicePrincipal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这两个参数</font></font><code>subscriptionID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以</font></font><code>tenantID</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Azure 门户中检索。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行</font></font><code>notepad aksedge-config.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并提供以下信息：</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">地点</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源组的 Azure 位置。您可以在为此解决方案部署的资源组下的 Azure 门户中找到它，但请删除名称中的空格！目前支持的区域有 eastus、eastus2、westus、westus2、westus3、westeurope 和 Northeurope。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">订阅ID</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您的订阅 ID。在 Azure 门户中，单击正在使用的订阅并复制/粘贴订阅 ID。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">租户ID</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您的租户 ID。在 Azure 门户中，单击 Azure Active Directory 并复制/粘贴租户 ID。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资源组名称</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为此解决方案部署的 Azure 资源组的名称。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户端ID</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先前创建的 Azure 服务主体的名称。 AKS 使用此服务主体将集群连接到 Arc。</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">客户秘密</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 服务主体的密码。</font></font></td>
</tr>
</tbody>
</table>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存文件，关闭 Powershell 窗口，打开新的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 Powershell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，导航回</font></font><code>C:\ManufacturingOntologies-main\Deployment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录并运行</font></font><code>SetupArc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ol>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，您可以通过新部署的 Azure Arc 实例从云管理 Kubernetes 集群。在 Azure 门户中，浏览到 Azure Arc 实例并选择工作负载。可以</font></font><code>Get-AksEdgeManagedServiceToken</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过</font><font style="vertical-align: inherit;">虚拟机上的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 Powershell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检索所需的服务令牌。</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/arc.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/arc.png" alt="弧" width="900" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在边缘部署 Azure IoT 操作</font></font></h2><a id="user-content-deploying-azure-iot-operations-on-the-edge" class="anchor" aria-label="永久链接：在边缘部署 Azure IoT 操作" href="#deploying-azure-iot-operations-on-the-edge"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请确保您已经开始生产线模拟并启用 Kubernetes 集群以通过 Azure Arc 进行管理，如前几段所述。然后，按照下列步骤操作：</font></font></p>
<ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Azure 门户，导航到此参考解决方案中部署的密钥保管库，然后通过单击</font></font><code>Access policies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>Keys, Secrets &amp; Certificate Management</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模板，单击</font></font><code>Next</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，搜索并选择您自己的用户身份，单击</font></font><code>Next</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将应用程序部分留空，将您自己的身份添加到访问策略中</font><font style="vertical-align: inherit;">，单击</font></font><code>Next</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，最后</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>az login</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先通过</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 PowerShell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录到 Azure 订阅</font><font style="vertical-align: inherit;">，然后运行</font></font><code>az connectedk8s enable-features -n "ontologies_cluster" -g "&lt;resourceGroupName&gt;" --features cluster-connect custom-locations</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&ZeroWidthSpace;&ZeroWidthSpace;，提供</font></font><code>resourceGroupName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署的参考解决方案，为 Arc 连接的 Kubernetes 集群（称为 ontologies_cluster）启用自定义位置。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Azure 门户，导航到此参考解决方案中部署的 Azure 存储，打开 ，</font></font><code>Storage browser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后打开</font></font><code>Blob containers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.您可以在此处访问此解决方案中使用的基于云的 OPC UA 证书存储。 Azure IoT Operations 使用 Azure Key Vault 作为基于云的 OPC UA 证书存储，因此需要复制证书：
</font></font><ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Azure 存储浏览器的 Blob 容器中，对于每个模拟生产线，导航到 app/pki/trusted/certs 文件夹，选择程序集、打包和测试证书文件并下载。</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>az login</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 PowerShell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录到您的 Azure 订阅</font><font style="vertical-align: inherit;">，然后运行</font></font><code>az keyvault secret set --name "&lt;stationName&gt;-der" --vault-name &lt;keyVaultName&gt; --file .&lt;stationName&gt;.der --encoding hex --content-type application/pkix-cert</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&ZeroWidthSpace;&ZeroWidthSpace;，提供</font><font style="vertical-align: inherit;">您在上一步中下载的 .der 证书文件的 6 个站中每个站的</font></font><code>keyVaultName</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和。</font></font><code>stationName</code><font style="vertical-align: inherit;"></font></li>
</ol>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Azure 门户中，导航到 Arc 连接的 kubernetes 群集，单击</font></font><code>Extensions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Add</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>Azure IoT Operations</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并单击 来部署 Azure IoT Operations </font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在“基本”页面上，保留所有内容不变。在“配置”页面，将MQ模式设置为</font></font><code>Auto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。您无需部署模拟 PLC，因为此参考解决方案已包含更实质性的生产线模拟。在“自动化”页面上，选择为此参考解决方案部署的 Key Vault，然后复制</font></font><code>az iot ops init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自动生成的命令。从部署的 VM 中，打开新的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 PowerShell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，通过运行登录到正确的 Azure 订阅</font></font><code>az login</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后运行</font></font><code>az iot ops init</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令。命令完成后，单击</font></font><code>Next</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后关闭向导。</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>az login</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署完成且所有 Kubernetes Pod 启动并运行后，通过</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 PowerShell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录到 Azure 订阅</font><font style="vertical-align: inherit;">，然后</font></font><code>kubectl apply -f secretsprovider.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用目录中提供的更新的机密提供程序资源文件运行</font></font><code>C:\ManufacturingOntologies-main\Tools\FactorySimulation\Station</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并提供 Key Vault 名称、Azure 租户 ID 和之前上传到 Azure Key Vault 的站证书文件名和别名。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Web 浏览器登录</font></font><a href="https://iotoperations.azure.com" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://iotoperations.azure.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择正确的 Azure 目录（右上角）并开始从生产线模拟创建资产。如上所述，该解决方案配备 2 条生产线（慕尼黑和西雅图），每条生产线由 3 个工位组成（组装、测试和包装）：
</font></font><ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于资产端点，请在慕尼黑生产线装配站等的 OPC UA 代理 URL 字段中输入 opc.tcp:// assembly.munich。您还需要选择</font></font><code>Use transport authentication certificate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并提供 Azure IoT Operations 证书的指纹你之前创建的。要读取指纹，请在 Windows 文件资源管理器中双击证书文件，选择</font></font><code>Details</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并向下滚动到</font></font><code>Thumbprint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于资产标签，选择</font></font><code>Import CSV file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并打开</font></font><code>StationTags.csv</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位于</font></font><code>C:\ManufacturingOntologies-main\Tools\FactorySimulation\Station</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录中的文件。</font></font></li>
</ol>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Azure 门户，导航到此参考解决方案中部署的 Azure 存储，打开 ，</font></font><code>Storage browser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后打开</font></font><code>Blob containers</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.对于模拟的每条生产线，导航到该</font></font><code>app/pki/rejected/certs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件夹&ZeroWidthSpace;&ZeroWidthSpace;并下载 Azure IoT 操作证书文件。然后删除该文件。导航到该</font></font><code>app/pki/trusted/certs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件夹&ZeroWidthSpace;&ZeroWidthSpace;并将 Azure IoT Operations 证书文件上传到此目录。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从部署的 VM 中，打开</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 命令提示符</font></font></strong><font style="vertical-align: inherit;"></font><code>C:\ManufacturingOntologies-main\Tools\FactorySimulation</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后导航到该目录并运行</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">StopSimulation</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令，然后运行</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&ZeroWidthSpace;&ZeroWidthSpace;StartSimulation</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">命令，重新启动生产线模拟</font><font style="vertical-align: inherit;">，如上所述。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从部署的 VM 中，打开</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows 命令提示符并按照</font></font></strong><font style="vertical-align: inherit;"></font><a href="https://learn.microsoft.com/en-us/azure/iot-operations/get-started/quickstart-add-assets#verify-data-is-flowing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述的说明进行操作</font><font style="vertical-align: inherit;">，以验证数据是否从生产线模拟中流出。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后一步，将 Azure IoT Operations 连接到此参考解决方案中部署的事件中心，如此处</font></font><a href="https://learn.microsoft.com/en-us/azure/iot-operations/connect-to-cloud/howto-configure-kafka" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Azure 数据资源管理器中进行状态监控、计算 OEE、检测异常并进行预测</font></font></h2><a id="user-content-condition-monitoring-calculating-oee-detecting-anomalies-and-making-predictions-in-azure-data-explorer" class="anchor" aria-label="永久链接：在 Azure 数据资源管理器中进行状态监控、计算 OEE、检测异常并进行预测" href="#condition-monitoring-calculating-oee-detecting-anomalies-and-making-predictions-in-azure-data-explorer"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还可以访问</font></font><a href="https://learn.microsoft.com/en-us/azure/synapse-analytics/data-explorer/data-explorer-overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure 数据资源管理器文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，了解如何创建用于状态监控、产量或维护预测或异常检测的无代码仪表板。我们在该文件夹中提供了一个示例仪表板，供您按照</font><a href="https://learn.microsoft.com/en-us/azure/data-explorer/azure-data-explorer-dashboards#to-create-new-dashboard-from-a-file" rel="nofollow"><font style="vertical-align: inherit;">此处</font></a></font><code>./Tools/ADXQueries</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">概述的步骤部署到 ADX 仪表板</font><font style="vertical-align: inherit;">。导入后，您需要通过按照</font><font style="vertical-align: inherit;">仪表板右上角的</font><font style="vertical-align: inherit;">格式指定 ADX 服务器集群实例的 HTTPS 端点来更新仪表板的数据源。</font></font><a href="https://learn.microsoft.com/en-us/azure/data-explorer/azure-data-explorer-dashboards#to-create-new-dashboard-from-a-file" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><code>https://ADXInstanceName.AzureRegion.kusto.windows.net/</code><font style="vertical-align: inherit;"></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/dashboard.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/dashboard.png" alt="仪表板" width="900" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：如果您想要显示特定班次的 OEE，请</font></font><code>Custom Time Range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>Time Range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADX 仪表板左上角的下拉列表中进行选择，然后输入您感兴趣的班次从开始到结束的日期和时间。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Kusto Explorer 中渲染内置统一命名空间 (UNS) 和 ISA-95 模型图</font></font></h2><a id="user-content-rendering-the-built-in-unified-namespace-uns-and-isa-95-model-graph-in-kusto-explorer" class="anchor" aria-label="永久链接：在 Kusto Explorer 中渲染内置统一命名空间 (UNS) 和 ISA-95 模型图" href="#rendering-the-built-in-unified-namespace-uns-and-isa-95-model-graph-in-kusto-explorer"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此参考解决方案基于发送到云中时间序列数据库（Azure 数据资源管理器）的 OPC UA 元数据来实现统一名称空间 (UNS)。此 OPC UA 元数据还包括 ISA-95 资产层次结构。生成的图表可以在 Kusto Explorer 工具中轻松可视化，该工具可</font></font><a href="https://learn.microsoft.com/en-us/azure/data-explorer/kusto/tools/kusto-explorer" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加与此参考解决方案中部署的 Azure 数据资源管理器实例的新连接，然后在 Kusto Explorer 中运行以下查询：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code>let edges = opcua_metadata_lkv
| project source = DisplayName, target = Workcell
| join kind=fullouter (opcua_metadata_lkv
    | project source = Workcell, target = Line) on source
    | join kind=fullouter (opcua_metadata_lkv
        | project source = Line, target = Area) on source
        | join kind=fullouter (opcua_metadata_lkv
            | project source = Area, target = Site) on source
            | join kind=fullouter (opcua_metadata_lkv
                | project source = Site, target = Enterprise) on source
                | project source = coalesce(source, source1, source2, source3, source4), target = coalesce(target, target1, target2, target3, target4);
let nodes = opcua_metadata_lkv;
edges | make-graph source --&gt; target with nodes on DisplayName
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="let edges = opcua_metadata_lkv
| project source = DisplayName, target = Workcell
| join kind=fullouter (opcua_metadata_lkv
    | project source = Workcell, target = Line) on source
    | join kind=fullouter (opcua_metadata_lkv
        | project source = Line, target = Area) on source
        | join kind=fullouter (opcua_metadata_lkv
            | project source = Area, target = Site) on source
            | join kind=fullouter (opcua_metadata_lkv
                | project source = Site, target = Enterprise) on source
                | project source = coalesce(source, source1, source2, source3, source4), target = coalesce(target, target1, target2, target3, target4);
let nodes = opcua_metadata_lkv;
edges | make-graph source --> target with nodes on DisplayName" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了获得最佳结果，请将</font></font><code>Layout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项更改为</font></font><code>Grouped</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/isa95graph.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/isa95graph.png" alt="isa95图" width="900" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同样，通过 UA Cloud Twin 自动上传到 Azure 数据资源管理器的完整 ISA-95 模型图可以通过执行以下查询在 Kusto Explorer 中呈现：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code>let edges = DTDL_models | where contenttype == "Relationship" | extend src = id, dst = target, typeName = type | project-away type ;
let nodes = DTDL_models | where contenttype == "Component" | extend nodeId = id, typeName = type | project-away type ;
edges
| make-graph src --&gt; dst with nodes on nodeId
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="let edges = DTDL_models | where contenttype == &quot;Relationship&quot; | extend src = id, dst = target, typeName = type | project-away type ;
let nodes = DTDL_models | where contenttype == &quot;Component&quot; | extend nodeId = id, typeName = type | project-away type ;
edges
| make-graph src --> dst with nodes on nodeId" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/isa95modelgraph.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/isa95modelgraph.png" alt="isa95模型图" width="900" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Azure 托管 Grafana 服务</font></font></h2><a id="user-content-using-azure-managed-grafana-service" class="anchor" aria-label="永久链接：使用 Azure 托管 Grafana 服务" href="#using-azure-managed-grafana-service"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还可以利用 Grafana 在 Azure 上为此参考解决方案创建仪表板。请参阅</font></font><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies/blob/main/Tools/GrafanaDashboard/configuregrafana.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/grafana.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/grafana.png" alt="格拉法纳" width="900" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Asset Admin Shell (AAS) 存储库中启用产品碳足迹计算 (PCF)</font></font></h2><a id="user-content-enabling-the-product-carbon-footprint-calculation-pcf-in-the-asset-admin-shell-aas-repository" class="anchor" aria-label="永久链接：在 Asset Admin Shell (AAS) 存储库中启用产品碳足迹计算 (PCF)" href="#enabling-the-product-carbon-footprint-calculation-pcf-in-the-asset-admin-shell-aas-repository"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">资产管理外壳 (AAS) 存储库在参考解决方案部署期间自动配置，但对于产品碳足迹 (PCF) 计算，需要提供 WattTime 服务帐户。请参阅</font></font><a href="https://www.watttime.org/api-documentation/#best-practices-for-api-usage" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WattTime API 文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了解如何注册帐户。激活您的帐户后，通过 Azure 门户的 YourDeploymentName-AAS-Repo -&gt; 配置 -&gt; 应用程序设置，在 AAS Repo 网站的设置中提供您的用户名和密码。</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/aas.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/aas.png" alt="原子吸收光谱法" width="400" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将参考解决方案连接到 Microsoft Power BI</font></font></h2><a id="user-content-connecting-the-reference-solution-to-microsoft-power-bi" class="anchor" aria-label="永久链接：将参考解决方案连接到 Microsoft Power BI" href="#connecting-the-reference-solution-to-microsoft-power-bi"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您需要访问 Power BI 订阅。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"></font><a href="https://go.microsoft.com/fwlink/?LinkId=2240819&amp;clcid=0x409" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装 Power BI Desktop 应用程序</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用有权访问 Power BI 订阅的用户登录 Power BI Desktop 应用。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Azure 门户，导航到 Azure 数据资源管理器数据库实例 ( </font></font><code>ontologies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)，</font></font><code>Database Admin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并向 Azure Active Directory 用户添加只能访问单个</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">订阅（即用于此参考解决方案的已部署实例的订阅）的权限。如果需要，请在 Azure Active Directory 中创建新用户。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"></font><code>Get data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Power BI 中，创建一个新报表并通过-&gt; </font></font><code>Azure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt;</font><font style="vertical-align: inherit;">选择 Azure 数据资源管理器时间序列数据作为数据源</font></font><code>Azure Data Explorer (Kusto)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在弹出窗口中，输入实例的 Azure 数据资源管理器终结点（例如</font></font><code>https://erichbtest3adx.eastus2.kusto.windows.net</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）、数据库名称 ( </font></font><code>ontologies</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) 和以下查询：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code> let _startTime = ago(1h);
 let _endTime = now();
 opcua_metadata_lkv
 | where Name contains "assembly"
 | where Name contains "munich"
 | join kind=inner (opcua_telemetry
     | where Name == "ActualCycleTime"
     | where Timestamp &gt; _startTime and Timestamp &lt; _endTime
 ) on DataSetWriterID
 | extend NodeValue = todouble(Value)
 | project Timestamp, NodeValue
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value=" let _startTime = ago(1h);
 let _endTime = now();
 opcua_metadata_lkv
 | where Name contains &quot;assembly&quot;
 | where Name contains &quot;munich&quot;
 | join kind=inner (opcua_telemetry
     | where Name == &quot;ActualCycleTime&quot;
     | where Timestamp > _startTime and Timestamp < _endTime
 ) on DataSetWriterID
 | extend NodeValue = todouble(Value)
 | project Timestamp, NodeValue" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">点击</font></font><code>Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这将导入慕尼黑生产线装配站最后一小时的实际循环时间。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出现提示时，使用您之前授予访问 Azure 数据资源管理器数据库权限的 Azure Active Directory 用户登录 Azure 数据资源管理器。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 中</font></font><code>Data view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择 NodeValue 列并</font></font><code>Don't summarize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>Summarization</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">菜单项中选择。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切换到</font></font><code>Report view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 下</font></font><code>Visualizations</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>Line Chart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可视化。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在下面</font></font><code>Visualizations</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将 移动</font></font><code>Timestamp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code>Data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>X-axis</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击它并选择</font></font><code>Timestamp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在下面</font></font><code>Visualizations</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将 移动</font></font><code>NodeValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font><code>Data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>Y-axis</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击它并选择</font></font><code>Median</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存您的新报告。</font></font></p>
</li>
</ol>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：您可以类似地将其他数据从 Azure 数据资源管理器添加到报告中。</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/powerbi.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/powerbi.png" alt="电源双" width="900" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将参考解决方案连接到 Microsoft Dynamics 365 Field Service</font></font></h2><a id="user-content-connecting-the-reference-solution-to-microsoft-dynamics-365-field-service" class="anchor" aria-label="永久链接：将参考解决方案连接到 Microsoft Dynamics 365 Field Service" href="#connecting-the-reference-solution-to-microsoft-dynamics-365-field-service"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">集成记录</font></font><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies/blob/main/Tools/DynamicsFS/ConfigureDynamicsFS.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">交钥匙替代方案：Microsoft Fabric</font></font></h2><a id="user-content-a-turn-key-alternative-microsoft-fabric" class="anchor" aria-label="永久链接：交钥匙替代方案：Microsoft Fabric" href="#a-turn-key-alternative-microsoft-fabric"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://learn.microsoft.com/en-us/fabric/get-started/microsoft-fabric-overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Fabric</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一款一体化分析解决方案，涵盖从数据移动到数据科学、分析和商业智能的所有内容。它提供一整套服务，包括数据湖、数据工程和数据集成，全部集中在一个地方。您甚至不需要 Azure 订阅，更不用说部署或管理任何应用程序或服务了。作为此存储库中提供的参考解决方案的更简单替代方案，您可以</font></font><a href="https://learn.microsoft.com/en-us/fabric/get-started/fabric-trial" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开始使用 Microsoft Fabric </font><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/fabric.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/fabric.png" alt="织物" width="900" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要为生产线数据配置 Microsoft Fabric，您需要至少 1 个支持 OPC UA PubSub 的 OPC UA 服务器集成到您的生产线中。或者，您可以使用 OPC UA 客户端/服务器到 OPC UA PubSub 适配器应用程序，例如本参考解决方案中使用的 UA Cloud Publisher。然后按照下列步骤操作：</font></font></p>
<ol dir="auto">
<li>
<p dir="auto"><font style="vertical-align: inherit;"></font><a href="https://fabric.microsoft.com" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录 Microsoft Fabric </font><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"></font><code>KQL Database</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; </font></font><code>See all</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt;</font><font style="vertical-align: inherit;">创建一个</font></font><code>KQL Database</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并为其命名，例如</font></font><code>kql_db_opcua</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。点击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 下</font></font><code>Database details</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，编辑</font></font><code>OneLake folder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置并将其设置为</font></font><code>Active</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这将允许通过</font></font><a href="https://learn.microsoft.com/en-us/fabric/onelake/onelake-overview" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OneLake</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以</font></font><a href="https://parquet.apache.org/docs/file-format/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parquet 文件格式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">共享组织内生产线的 OPC UA 时间序列数据</font><font style="vertical-align: inherit;">。点击</font></font><code>Done</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建提取 OPC UA PubSub 生产线数据所需的表，方法是单击</font></font><code>Check your data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，删除文本框中的示例数据，然后输入以下 Kusto 命令（一次一个），然后单击</font></font><code>Run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每一行：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code> .create table opcua_raw(payload: dynamic)

 .create table opcua_metadata_raw (payload: dynamic) 

 .create table opcua_raw ingestion json mapping "opcua_mapping" @'[{"column":"payload","path":"$","datatype":"dynamic"}]'

 .create table opcua_metadata_raw ingestion json mapping "opcua_metadata_mapping" @'[{"column":"payload","path":"$","datatype":"dynamic"}]'

 .create table opcua_intermediate(DataSetWriterID: string, Timestamp: datetime, Payload: dynamic)

 .create table opcua_telemetry (DataSetWriterID: string, Timestamp: datetime, Name: string, Value: dynamic)

 .create table opcua_metadata (DataSetWriterID: string, Name: string) 
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value=" .create table opcua_raw(payload: dynamic)

 .create table opcua_metadata_raw (payload: dynamic) 

 .create table opcua_raw ingestion json mapping &quot;opcua_mapping&quot; @'[{&quot;column&quot;:&quot;payload&quot;,&quot;path&quot;:&quot;$&quot;,&quot;datatype&quot;:&quot;dynamic&quot;}]'

 .create table opcua_metadata_raw ingestion json mapping &quot;opcua_metadata_mapping&quot; @'[{&quot;column&quot;:&quot;payload&quot;,&quot;path&quot;:&quot;$&quot;,&quot;datatype&quot;:&quot;dynamic&quot;}]'

 .create table opcua_intermediate(DataSetWriterID: string, Timestamp: datetime, Payload: dynamic)

 .create table opcua_telemetry (DataSetWriterID: string, Timestamp: datetime, Name: string, Value: dynamic)

 .create table opcua_metadata (DataSetWriterID: string, Name: string) " tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建 OPC UA PubSub 生产线数据解析函数，方法是输入以下函数定义，一次一个，单击</font></font><code>Run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每一行：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code> .create-or-alter function OPCUARawExpand() {
     opcua_raw
     |mv-expand records = payload.Messages
     | where records != ''
     |project 
       DataSetWriterID = tostring(records["DataSetWriterId"]),
       Timestamp = todatetime(records["Timestamp"]),
       Payload = todynamic(records["Payload"])
  }

  .create-or-alter function OPCUADatasetExpand() {
     opcua_intermediate
     | mv-apply Payload on (
         extend key = tostring(bag_keys(Payload)[0])
         | extend p = Payload[key]
         | project Name = key, Value = todynamic(p.Value)
     )
 }

 .create-or-alter function OPCUAMetaDataExpand() {
     opcua_metadata_raw
     | project DataSetWriterId = tostring(payload.DataSetWriterId), Name = tostring(payload.MetaData.Name)
 }
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value=" .create-or-alter function OPCUARawExpand() {
     opcua_raw
     |mv-expand records = payload.Messages
     | where records != ''
     |project 
       DataSetWriterID = tostring(records[&quot;DataSetWriterId&quot;]),
       Timestamp = todatetime(records[&quot;Timestamp&quot;]),
       Payload = todynamic(records[&quot;Payload&quot;])
  }

  .create-or-alter function OPCUADatasetExpand() {
     opcua_intermediate
     | mv-apply Payload on (
         extend key = tostring(bag_keys(Payload)[0])
         | extend p = Payload[key]
         | project Name = key, Value = todynamic(p.Value)
     )
 }

 .create-or-alter function OPCUAMetaDataExpand() {
     opcua_metadata_raw
     | project DataSetWriterId = tostring(payload.DataSetWriterId), Name = tostring(payload.MetaData.Name)
 }" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过输入以下策略更新（一次一个），单击</font></font><code>Run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每一行，将 OPC UA PubSub 解析函数应用到您的表：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code> .alter table opcua_intermediate policy update @'[{"Source": "opcua_raw", "Query": "OPCUARawExpand()", "IsEnabled": "True"}]'

 .alter table opcua_telemetry policy update @'[{"Source": "opcua_intermediate", "Query": "OPCUADatasetExpand()", "IsEnabled": "True"}]'

 .alter table opcua_metadata policy update @'[{"Source": "opcua_metadata_raw", "Query": "OPCUAMetaDataExpand()", "IsEnabled": "True"}]'
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value=" .alter table opcua_intermediate policy update @'[{&quot;Source&quot;: &quot;opcua_raw&quot;, &quot;Query&quot;: &quot;OPCUARawExpand()&quot;, &quot;IsEnabled&quot;: &quot;True&quot;}]'

 .alter table opcua_telemetry policy update @'[{&quot;Source&quot;: &quot;opcua_intermediate&quot;, &quot;Query&quot;: &quot;OPCUADatasetExpand()&quot;, &quot;IsEnabled&quot;: &quot;True&quot;}]'

 .alter table opcua_metadata policy update @'[{&quot;Source&quot;: &quot;opcua_metadata_raw&quot;, &quot;Query&quot;: &quot;OPCUAMetaDataExpand()&quot;, &quot;IsEnabled&quot;: &quot;True&quot;}]'" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建“最后已知值”OPC UA PubSub 元数据表，以确保您始终使用最新的可用元数据，方法是输入以下物化视图定义并单击</font></font><code>Run</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code> .create materialized-view opcua_metadata_lkv on table opcua_metadata
 {
     opcua_metadata
     | extend iTime = ingestion_time()
     | summarize arg_max(iTime, *) by Name, DataSetWriterID
 }
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value=" .create materialized-view opcua_metadata_lkv on table opcua_metadata
 {
     opcua_metadata
     | extend iTime = ingestion_time()
     | summarize arg_max(iTime, *) by Name, DataSetWriterID
 }" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"></font><code>Eventstream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; </font></font><code>See all</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt;</font><font style="vertical-align: inherit;">创建一个</font></font><code>Eventstream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并为其命名（例如</font></font><code>eventstream_opcua_telemetry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。点击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。该组件将接收 OPC UA PubSub 生产线遥测数据并将其发送到您的 KQL 数据库。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>New source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择</font></font><code>Custom App</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并为其命名（例如</font></font><code>opcua_telemetry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。点击</font></font><code>Add</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在</font></font><code>Information</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框中，单击</font></font><code>Connection string-primary key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并复制它。配置 UA Cloud Publisher 时您很快就会需要它。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"></font><code>Eventstream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; </font></font><code>See all</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt;</font><font style="vertical-align: inherit;">创建另一个</font></font><code>Eventstream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并为其命名（例如</font></font><code>eventstream_opcua_metadata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。点击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。该组件将接收 OPC UA PubSub 生产线元数据并将其发送到您的 KQL 数据库。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>New source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择</font></font><code>Custom App</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并为其命名（例如</font></font><code>opcua_metadata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。点击</font></font><code>Add</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在</font></font><code>Information</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">框中，单击</font></font><code>Connection string-primary key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并复制它。配置 UA Cloud Publisher 时您很快就会需要它。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在配置 UA Cloud Publisher。您可以按照</font></font><a href="https://github.com/digitaltwinconsortium/ManufacturingOntologies#replacing-the-production-line-simulation-with-a-real-production-line"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述的步骤连接您自己的生产线</font><font style="vertical-align: inherit;">，也可以在此存储库中提供的生产线模拟中修改 UA Cloud Publisher 设置的配置，例如慕尼黑生产线。对于后者，请按照下列步骤操作：</font></font></p>
<ol dir="auto">
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录到使用此参考解决方案部署的 VM，打开</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 Powershell 窗口</font></font></strong><font style="vertical-align: inherit;"></font><code>Get-AksEdgeNodeAddr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font><font style="vertical-align: inherit;">运行</font></font><code>kubectl get services -n munich</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开虚拟机上的浏览器，然后在地址字段（例如</font></font><code>http://192.168.0.2:30356</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中输入上一步中为 UA Cloud Publisher 检索到的 IP 地址和端口，以访问 UA Cloud Publisher UI。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 UA Cloud Publisher UI 中，单击</font></font><code>Configuration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并在字段中输入</font><font style="vertical-align: inherit;">您之前复制的自定义应用程序</font></font><code>Connection string-primary key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">在字段</font><font style="vertical-align: inherit;">中输入</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">在</font><font style="vertical-align: inherit;">（实体路径包含在连接字符串的末尾并以“es_”开头） ) 和自定义应用程序的名称输入到该</font><font style="vertical-align: inherit;">字段中（自定义应用程序名称包含在连接字符串中，并以 开头</font><font style="vertical-align: inherit;">和结尾</font><font style="vertical-align: inherit;">）。</font></font><code>opcua_telemetry</code><font style="vertical-align: inherit;"></font><code>Broker Password</code><font style="vertical-align: inherit;"></font><code>$ConnectionString</code><font style="vertical-align: inherit;"></font><code>Broker Username</code><font style="vertical-align: inherit;"></font><code>EntityPath</code><font style="vertical-align: inherit;"></font><code>Broker Message Topic</code><font style="vertical-align: inherit;"></font><code>Broker URL</code><font style="vertical-align: inherit;"></font><code>eventstream-</code><font style="vertical-align: inherit;"></font><code>.servicebus.windows.net</code><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选中该复选框，然后在该</font><font style="vertical-align: inherit;">字段中</font></font><code>Use Alternative Broker For OPC UA Metadata Messages</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font><font style="vertical-align: inherit;">您之前复制的自定义应用程序</font></font><code>Connection string-primary key</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">在该字段中输入</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">在该字段中输入，</font><font style="vertical-align: inherit;">在该字段中</font><font style="vertical-align: inherit;">输入</font><font style="vertical-align: inherit;">（实体路径包含在连接字符串的末尾，并以“es_”开头） ) 和自定义应用程序的名称输入到</font><font style="vertical-align: inherit;">字段中（自定义应用程序名称包含在连接字符串中，以 开头</font><font style="vertical-align: inherit;">和结尾</font><font style="vertical-align: inherit;">）。</font></font><code>opcua_metadata</code><font style="vertical-align: inherit;"></font><code>Alternative Broker Password</code><font style="vertical-align: inherit;"></font><code>9093</code><font style="vertical-align: inherit;"></font><code>Alternative Broker Port</code><font style="vertical-align: inherit;"></font><code>$ConnectionString</code><font style="vertical-align: inherit;"></font><code>Alternative Broker Username</code><font style="vertical-align: inherit;"></font><code>EntityPath</code><font style="vertical-align: inherit;"></font><code>Broker Metadata Topic</code><font style="vertical-align: inherit;"></font><code>Alternative Broker URL</code><font style="vertical-align: inherit;"></font><code>eventstream-</code><font style="vertical-align: inherit;"></font><code>.servicebus.windows.net</code><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>Metadata Send Interval in Seconds</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设为</font></font><code>3000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
  <a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/publisherconfig.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/publisherconfig.png" alt="发布者配置" width="900" style="max-width: 100%;"></a>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>Apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置页面顶部的 。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 UA Cloud Publisher UI 中，单击</font></font><code>Diagnostics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并验证您是否具有与 Microsoft Fabric 的连接（</font></font><code>Connected to broker(s)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置为</font></font><code>True</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</li>
</ol>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回 Microsoft Fabric，选择您的工作区，单击</font></font><code>eventstream_opcua_telemetry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件流并选择</font></font><code>Open Eventsteam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>New destination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择</font></font><code>KQL Database</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并为其命名（例如</font></font><code>kql_db_opcua_telemetry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。在 下</font></font><code>Workspace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择您的 Fabric 工作区（例如</font></font><code>My workspace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），然后在 下</font></font><code>KQL Database</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择您之前设置的 KQL 数据库。点击</font></font><code>Add and configure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>Ingest data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弹出的窗口中，在 下</font></font><code>Table</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><code>Existing table</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>opcua_raw</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并单击</font></font><code>Next: Source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。保持一切原样，然后单击</font></font><code>Next: Schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。等待几秒钟以使摄取的数据可用。在 下</font></font><code>Data format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在 下</font></font><code>Mapping name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>Use existing mapping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择</font></font><code>opcua_mapping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。点击</font></font><code>Next: Summary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。点击</font></font><code>Close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择您的工作区，单击您的</font></font><code>eventstream_opcua_metadata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">事件流并选择</font></font><code>Open Eventsteam</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>New destination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择</font></font><code>KQL Database</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并为其命名（例如</font></font><code>kql_db_opcua_metadata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。在 下</font></font><code>Workspace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择您的 Fabric 工作区（例如</font></font><code>My workspace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），然后在 下</font></font><code>KQL Database</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择您之前设置的 KQL 数据库。点击</font></font><code>Add and configure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>Ingest data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">弹出的窗口中，在 下</font></font><code>Table</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><code>Existing table</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>opcua_raw_metadata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并单击</font></font><code>Next: Source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。保持一切原样，然后单击</font></font><code>Next: Schema</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。等待几秒钟以使摄取的数据可用。在 下</font></font><code>Data format</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>JSON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在 下</font></font><code>Mapping name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>Use existing mapping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择</font></font><code>opcua_metadata_mapping</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。点击</font></font><code>Next: Summary</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。点击</font></font><code>Close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要通过 OneLake 共享 OPC UA 数据，请</font></font><code>Lakehouse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过单击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt; </font></font><code>See all</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-&gt;创建一个数据</font></font><code>Lakehouse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并为其命名，例如</font></font><code>opcua_lake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。点击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>New shortcut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>Microsoft OneLake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择您的 KQL 数据库，展开</font></font><code>Tables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择</font></font><code>opcua_telemetry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>New shortcut</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择</font></font><code>Microsoft OneLake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，选择您的 KQL 数据库，展开</font></font><code>Tables</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择</font></font><code>opcua_metadata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击您的工作区，选择</font></font><code>Lineage view</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查看您刚刚在 Microsoft Fabric 中设置的 OPC UA 数据的整个流程：</font></font></p>
 <a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/fabricflow.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/fabricflow.png" alt="织物流" width="900" style="max-width: 100%;"></a>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击我们的 KQL 数据库并选择，</font></font><code>Open KQL Database</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后选择</font></font><code>Check your data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。删除示例查询并在文本框中输入以下查询：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code>  let _startTime = ago(1h);
  let _endTime = now();
  opcua_metadata_lkv
  | where Name contains "assembly"
  | where Name contains "munich"
  | join kind=inner (opcua_telemetry
      | where Name == "ActualCycleTime"
      | where Timestamp &gt; _startTime and Timestamp &lt; _endTime
  ) on DataSetWriterID
  | extend NodeValue = todouble(Value)
  | project Timestamp, NodeValue
  | sort by Timestamp desc 
  | render linechart 
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="  let _startTime = ago(1h);
  let _endTime = now();
  opcua_metadata_lkv
  | where Name contains &quot;assembly&quot;
  | where Name contains &quot;munich&quot;
  | join kind=inner (opcua_telemetry
      | where Name == &quot;ActualCycleTime&quot;
      | where Timestamp > _startTime and Timestamp < _endTime
  ) on DataSetWriterID
  | extend NodeValue = todouble(Value)
  | project Timestamp, NodeValue
  | sort by Timestamp desc 
  | render linechart " tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
</ol>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这将导致直接在 Fabric 中渲染的线图：</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/kqlrender.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/kqlrender.png" alt="kql渲染" width="900" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将参考解决方案连接到本地 SAP 系统</font></font></h2><a id="user-content-connecting-the-reference-solution-to-on-premises-sap-systems" class="anchor" aria-label="永久链接：将参考解决方案连接到本地 SAP 系统" href="#connecting-the-reference-solution-to-on-premises-sap-systems"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：如果您想在连接真正的 SAP 系统之前简单地尝试 SAP 连接，您可以从</font><a href="https://cal.sap.com/catalog#/applianceTemplates" rel="nofollow"><font style="vertical-align: inherit;">此处</font></a></font><code>SAP S/4 HANA Fully-Activated Appliance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部署到 Azure</font><font style="vertical-align: inherit;">并使用它。</font></font><a href="https://cal.sap.com/catalog#/applianceTemplates" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理与本地 SAP 系统的连接的 Azure 服务称为 Azure 逻辑应用。 Azure 逻辑应用是一项无代码 Azure 服务，用于编排可触发操作的工作流。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置 Azure 逻辑应用以从本地 SAP 系统接收数据</font></font></h3><a id="user-content-configuring-azure-logic-apps-to-receive-data-from-on-premises-sap-systems" class="anchor" aria-label="永久链接：配置 Azure 逻辑应用以从本地 SAP 系统接收数据" href="#configuring-azure-logic-apps-to-receive-data-from-on-premises-sap-systems"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">若要创建从本地 SAP 系统到 Azure 逻辑应用的新 Azure 逻辑应用工作流，并将从 SAP 发送的数据存储在此参考解决方案中部署的 Azure 存储帐户中，请执行以下步骤：</font></font></p>
<ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在通过 Azure 门户部署此参考解决方案期间选择的同一区域中部署 Azure 逻辑应用实例。选择基于消费的版本。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Azure 逻辑应用设计器中，选择触发器模板</font></font><code>When a HTTP request is received</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><code>+ New step</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、选择</font></font><code>Azure File Storage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、选择</font></font><code>Create file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。为连接指定一个名称，并选择为此参考解决方案部署的 Azure 存储帐户的存储帐户名称。对于</font></font><code>Folder path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、输入</font></font><code>sap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、对于</font></font><code>File name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font><code>IDoc.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及对于</font><font style="vertical-align: inherit;">从动态内容中</font></font><code>File content</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择。</font></font><code>Body</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Azure 门户中，导航到此参考解决方案中部署的存储帐户，依次选择</font></font><code>Storage browser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、选择</font></font><code>File shares</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和 选择</font></font><code>Add file share</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。输入</font></font><code>sap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称并选择</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将鼠标悬停在触发器和创建文件操作之间的箭头上，选择按钮</font></font><code>+</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并选择</font></font><code>Add a parallel branch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">从可用的 Azure 数据资源管理器操作列表中</font><font style="vertical-align: inherit;">选择</font></font><code>Azure Data Explorer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并添加操作。</font></font><code>Run KQL query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定此参考解决方案中部署的 Azure 数据资源管理器服务实例的 ADX 实例（群集 URL）名称和数据库名称。在查询字段中，输入</font></font><code>.create table SAP (name:string, label:string)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存您的工作流程。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><code>Run Trigger</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并等待运行完成。验证工作流程的所有三个组件上都有绿色复选标记。如果您看到任何红色感叹号，请选择该组件以获取有关该错误的更多信息。</font></font></li>
</ol>
<p dir="auto"><font style="vertical-align: inherit;"></font><code>HTTP GET URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从工作流程中的 HTTP 触发器</font><font style="vertical-align: inherit;">复制。</font><font style="vertical-align: inherit;">在下一步配置 SAP 时您将需要它。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置本地 SAP 系统以将数据发送到 Azure 逻辑应用</font></font></h3><a id="user-content-configuring-your-on-premises-sap-system-to-send-data-to-azure-logic-apps" class="anchor" aria-label="永久链接：配置本地 SAP 系统以将数据发送到 Azure 逻辑应用" href="#configuring-your-on-premises-sap-system-to-send-data-to-azure-logic-apps"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">登录 SAP Windows 虚拟机</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进入虚拟机桌面后，单击</font></font><code>SAP Logon</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>Log On</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序左上角的</font></font></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/LogOn.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/LogOn.png" alt="工作流程" width="900" style="max-width: 100%;"></a></p>
<ol start="4" dir="auto">
<li><font style="vertical-align: inherit;"></font><code>BPINST</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用用户名和</font></font><code>Welcome1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">密码</font><font style="vertical-align: inherit;">登录</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在右上角搜索</font></font><code>SM59</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.这应该会弹出</font></font><code>Configuration of RFC Connections</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕。</font></font></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/SM95Search.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/SM95Search.png" alt="工作流程" width="900" style="max-width: 100%;"></a></p>
<ol start="6" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font><font style="vertical-align: inherit;">应用程序顶部的</font></font><code>Edit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和。</font></font><code>Create</code><font style="vertical-align: inherit;"></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在字段</font></font><code>LOGICAPP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中</font><font style="vertical-align: inherit;">输入</font></font><code>Destination</code><font style="vertical-align: inherit;"></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从</font></font><code>Connection Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下拉列表中选择</font></font><code>HTTP Connection to external server</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击窗口底部的绿色勾号。</font></font></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/ConnectionLOGICAPP.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/ConnectionLOGICAPP.png" alt="工作流程" width="900" style="max-width: 100%;"></a></p>
<ol start="10" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">盒子里</font></font><code>Description 1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">放了</font></font><code>LOGICAPP</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击该选项卡并</font><font style="vertical-align: inherit;">使用您从上面复制的逻辑应用中</font></font><code>Technical Settings</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">填写字段</font></font><code>Host</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（例如 prod-51.northeurope.logic.azure.com）。</font></font><code>HTTP GET URL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font><font style="vertical-align: inherit;">。</font></font><code>Port</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&ZeroWidthSpace;</font></font><code>443</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并输入</font><font style="vertical-align: inherit;">开头的</font></font><code>Path Prefix</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其余部分</font></font><code>HTTP GET URL</code><font style="vertical-align: inherit;"></font><code>/workflows/...</code></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/AddgetURL.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/AddgetURL.png" alt="工作流程" width="900" style="max-width: 100%;"></a></p>
<ol start="12" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>Login &amp; Security</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">向下滚动</font></font><code>Security Options</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  并设置</font></font><code>SSL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code>Active</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">点击</font></font><code>Save</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在步骤 5 的主应用程序中，搜索</font></font><code>WE21</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.这将调出</font></font><code>Ports in IDoc processing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><code>XML HTTP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件夹并单击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>Port</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段中输入</font></font><code>LOGICAPP</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>RFC destination</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><code>LOGICAPP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">点击</font></font><code>Green Check</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进入</font></font><code>Save</code></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/PortSelectLOGICAPP.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/PortSelectLOGICAPP.png" alt="工作流程" width="900" style="max-width: 100%;"></a></p>
<ol start="20" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过从 SAP 系统的搜索框输入内容，为 SAP 系统中的 Azure 逻辑应用创建合作伙伴配置文件</font></font><code>WE20</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这将打开屏幕</font></font><code>Partner profiles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">展开</font></font><code>Partner Profiles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件夹并选择</font></font><code>Partner Type LS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（逻辑系统）文件夹。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>S4HCLNT100</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">合作伙伴个人资料。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击表格</font></font><code>Create Outbound Parameter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下方的按钮</font></font><code>Outbound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/Outbound.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/Outbound.png" alt="工作流程" width="900" style="max-width: 100%;"></a></p>
<ol start="24" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>Partner Profiles: Outbound Parameters</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对话框中，输入</font></font><code>INTERNAL_ORDER</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><code>Message Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。在</font></font><code>Outbound Options</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选项卡中，输入</font></font><code>LOGICAPP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for </font></font><code>Receiver port</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。选择</font></font><code>Pass IDoc Immediately</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单选按钮。对于</font></font><code>Basic type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font><code>INTERNAL_ORDER01</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.单击</font></font><code>Save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按钮。</font></font></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/OutboundParams.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/OutboundParams.png" alt="工作流程" width="900" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试 SAP 到 Azure 逻辑应用的工作流</font></font></h3><a id="user-content-testing-your-sap-to-azure-logic-app-workflow" class="anchor" aria-label="永久链接：测试 SAP 到 Azure 逻辑应用程序的工作流程" href="#testing-your-sap-to-azure-logic-app-workflow"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要尝试从 SAP 到 Azure 逻辑应用的工作流程，请按照以下步骤操作：</font></font></p>
<ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在主应用程序中，搜索</font></font><code>WE19</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.这应该会弹出</font></font><code>Test Tool for IDoc Processing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><code>Using message type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并输入</font></font><code>INTERNAL_ORDER</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>Create</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕左上角的 。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击该</font></font><code>EDICC</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字段。</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>Edit Control Record Fields</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">  应该会打开</font><font style="vertical-align: inherit;">一个屏幕。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该</font></font><code>Receiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分中：</font></font><code>PORT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font><code>LOGICAPP</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Partner No.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font><code>S4HCLNT100</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Part. Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font><code>LS</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该</font></font><code>Sender</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分中：</font></font><code>PORT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font><code>SAPS4H</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Partner No.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font><code>S4HCLNT100</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">、</font></font><code>Part. Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输入</font></font><code>LS</code></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击窗口底部的绿色勾号。</font></font></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/Testing2.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/Testing2.png" alt="工作流程" width="900" style="max-width: 100%;"></a></p>
<ol start="9" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击</font></font><code>Standard Outbound Processing</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕顶部的选项卡。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><code>Outbound Processing of IDoc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对话框中，单击绿色复选按钮以启动 IDoc 消息处理</font></font></li>
</ol>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开 Azure 存储帐户的存储浏览器，选择文件共享并检查文件夹</font></font><code>IDoc.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中是否创建了新文件</font></font><code>sap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：要检查 IDoc 消息处理错误，请</font></font><code>WE09</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 SAP 系统的搜索框中输入，选择时间范围并单击 按钮</font></font><code>execute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。这将打开</font></font><code>IDoc Search for Business Content</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">屏幕，您可以在显示的表中选择每个 IDoc 来处理错误。</font></font></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft 本地数据网关</font></font></h3><a id="user-content-microsoft-on-premises-data-gateway" class="anchor" aria-label="永久链接：Microsoft 本地数据网关" href="#microsoft-on-premises-data-gateway"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft 提供了一个本地数据网关，用于将数据从 Azure 逻辑应用发送</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本地 SAP 系统。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：要将数据</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从本地 SAP 系统接收到云中的 Azure 逻辑应用，</font></font></strong><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不需要</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SAP 连接器和本地数据网关</font><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要安装本地数据网关，请执行以下步骤：</font></font></p>
<ol dir="auto">
<li><font style="vertical-align: inherit;"></font><a href="https://aka.ms/on-premises-data-gateway-installer" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载并安装本地数据网关</font><font style="vertical-align: inherit;">。特别注意</font></font><a href="https://learn.microsoft.com/en-us/azure/logic-apps/logic-apps-gateway-install#prerequisites" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">先决条件</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！例如，如果您的 Azure 帐户有权访问多个 Azure 订阅，则需要使用不同的 Azure 帐户来安装网关并创建随附的本地数据网关 Azure 资源。如果是这种情况，只需在 Azure Active Directory 中创建一个新用户即可。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果尚未安装，请从</font></font><a href="https://download.microsoft.com/download/1/6/5/165255E7-1014-4D0A-B094-B6A430A6BFFC/vcredist_x64.exe" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载并安装 Visual Studio 2010 (VC++ 10.0) 可再发行组件。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://support.sap.com/en/product/connectors/msnet.html?anchorId=section_512604546" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载并安装 SAP Connector for Microsoft .NET 3.0 for Windows x64 </font><font style="vertical-align: inherit;">。需要 SAP 门户的 SAP 下载访问权限。如果您没有此信息，请联系 SAP 支持。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将 4 个库 libicudecnumber.dll、rscp4n.dll、sapnco.dll 和 sapnco_utils.dll 从 SAP 连接器的安装位置（默认情况下为</font></font><code>C:\Program Files\SAP\SAP_DotNetConnector3_Net40_x64</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）复制到数据网关的安装位置（默认情况下为</font></font><code>C:\Program Files\On-premises data gateway</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></li>
<li><font style="vertical-align: inherit;"></font><code>On-premises data gateway</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过之前安装的本地数据网关安装包附带的配置工具</font><font style="vertical-align: inherit;">重新启动数据网关。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上一步安装数据网关期间选择的同一 Azure 区域中创建本地数据网关 Azure 资源，并在 下选择数据网关的名称</font></font><code>Installation Name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/gateway.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/gateway.png" alt="网关" width="500" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：有关配置步骤的更多背景信息可以</font></font><a href="https://learn.microsoft.com/en-us/azure/logic-apps/logic-apps-using-sap-connector?tabs=consumption" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">访问。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：如果数据网关或 SAP 连接器遇到错误，您可以按照</font></font><a href="https://learn.microsoft.com/en-us/archive/blogs/david_burgs_blog/enable-sap-nco-library-loggingtracing-for-azure-on-premises-data-gateway-and-the-sap-connector" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以下步骤</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用调试跟踪。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用真实生产线代替模拟生产线</font></font></h2><a id="user-content-replacing-the-production-line-simulation-with-a-real-production-line" class="anchor" aria-label="永久链接：用真实生产线代替生产线模拟" href="#replacing-the-production-line-simulation-with-a-real-production-line"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">准备好连接自己的生产线后，只需从 Azure 门户中删除 VM 即可。</font></font></p>
<ol dir="auto">
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编辑此存储库文件夹中提供的 UA-CloudPublisher.yaml 文件</font></font><code>Deployment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，将 [yourstorageaccountname] 替换为您的 Azure 存储帐户的名称，将 [key] 替换为您的 Azure 存储帐户的密钥。您可以从部署的 Azure 存储帐户上的 Azure 门户的访问密钥下访问此信息。</font></font></p>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用以下命令运行 UA Cloud Publisher。托管 UA Cloud Publisher 的边缘 PC 需要 Kubernetes 支持和 Internet 访问（通过端口 9093），并且需要能够连接到生产线中启用 OPC UA 的机器：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code> kubectl apply -f UA-CloudPublisher.yaml
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value=" kubectl apply -f UA-CloudPublisher.yaml" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
</ol>
<p dir="auto"><font style="vertical-align: inherit;"></font><code>Get-AksEdgeNodeAddr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：在 Azure Kubernetes Services Edge Essentials 上，您可以通过从</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 Powershell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行来获取 Kubernetes 群集的 IP 地址</font><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"></font><code>kubectl get services -n &lt;namespace&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：您可以通过从</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">管理员 Powershell 窗口</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运行来查询 UA Cloud Publisher 服务的外部 Kubernetes 端口</font><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/publisher.png"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/publisher.png" alt="出版商" width="900" style="max-width: 100%;"></a></p>
<ol dir="auto">
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Edge PC 上打开浏览器并导航到 http://[IPAddressOfYourKubernetesCluster]:[KubernetesPortOfYourPublisherService]。您现在已连接到 UA Cloud Publisher 的交互式 UI。选择“配置”菜单项并输入以下信息，将 [myeventhubsnamespace] 替换为事件中心命名空间的名称，并将 [myeventhubsnamespaceprimarykeyconnectionstring] 替换为事件中心命名空间的主键连接字符串。可以在 Azure 门户中的事件中心的“共享访问策略”-&gt;“RootManagedSharedAccessKey”下读取主键连接字符串。然后点击</font></font><code>Apply</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto"><pre class="notranslate"><code> PublisherName: "UACloudPublisher",
 BrokerUrl: "[myeventhubsnamespace].servicebus.windows.net",
 BrokerPort: 9093,
 BrokerUsername: "$ConnectionString",
 BrokerPassword: "[myeventhubsnamespaceprimarykeyconnectionstring]",
 BrokerMessageTopic: "data",
 BrokerMetadataTopic: "metadata",
 SendUAMetadata: true,
 MetadataSendInterval: 43200,
 BrokerCommandTopic: "",
 BrokerResponseTopic: "",
 BrokerMessageSize: 262144,
 CreateBrokerSASToken: false,
 UseTLS: false,
 InternalQueueCapacity: 1000,
 DefaultSendIntervalSeconds: 1,
 DiagnosticsLoggingInterval: 30,
 DefaultOpcSamplingInterval: 500,
 DefaultOpcPublishingInterval: 1000,
 UAStackTraceMask: 645,
 ReversiblePubSubEncoding: false,
 AutoLoadPersistedNodes: true
</code></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value=" PublisherName: &quot;UACloudPublisher&quot;,
 BrokerUrl: &quot;[myeventhubsnamespace].servicebus.windows.net&quot;,
 BrokerPort: 9093,
 BrokerUsername: &quot;$ConnectionString&quot;,
 BrokerPassword: &quot;[myeventhubsnamespaceprimarykeyconnectionstring]&quot;,
 BrokerMessageTopic: &quot;data&quot;,
 BrokerMetadataTopic: &quot;metadata&quot;,
 SendUAMetadata: true,
 MetadataSendInterval: 43200,
 BrokerCommandTopic: &quot;&quot;,
 BrokerResponseTopic: &quot;&quot;,
 BrokerMessageSize: 262144,
 CreateBrokerSASToken: false,
 UseTLS: false,
 InternalQueueCapacity: 1000,
 DefaultSendIntervalSeconds: 1,
 DiagnosticsLoggingInterval: 30,
 DefaultOpcSamplingInterval: 500,
 DefaultOpcPublishingInterval: 1000,
 UAStackTraceMask: 645,
 ReversiblePubSubEncoding: false,
 AutoLoadPersistedNodes: true" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
</li>
<li>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从您的机器（或连接适配器软件）配置 OPC UA 数据节点。为此，请选择 OPC UA 服务器连接菜单项，输入 OPC UA 服务器 IP 地址和端口，然后单击连接。您现在可以浏览要从中发送遥测数据的 OPC UA 服务器。如果您找到了所需的 OPC UA 节点，请右键单击它并选择发布。</font></font></p>
</li>
</ol>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：UA Cloud Publisher 将其配置和持久性文件存储在本解决方案中部署的 Azure 存储帐户的云中。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：您可以通过选择“发布节点”选项卡来检查当前正在发布的内容。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：您可以在“诊断”选项卡上查看来自 UA Cloud Publisher 的诊断信息。</font></font></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用 Azure OpenAI 服务启用自动资产载入</font></font></h2><a id="user-content-enabling-automatic-asset-onboarding-with-azure-openai-service" class="anchor" aria-label="永久链接：使用 Azure OpenAI 服务启用自动资产载入" href="#enabling-automatic-asset-onboarding-with-azure-openai-service"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于您的实际生产线，您可以通过 Azure OpenAI 服务、UA Edge Translator 和 UA Cloud Publisher 为具有固定数据模型（例如电表、阀门、泵等）的工业资产启用自动资产上线，具体步骤如下：</font></font></p>
<ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 Azure 门户中部署 Azure OpenAI 服务的实例。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将大型语言模型部署到 Azure 开放 AI 服务实例，建议使用 GPT-4 以获得最佳结果。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置为您自己的生产线部署的 UA Cloud Publisher，以通过其内置用户界面使用您的 Azure OpenAI 实例。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在具有 Kubernetes 支持的 PC 上部署 UA Edge Translator，该 PC 与您的工业资产和 UA Cloud Publisher 位于同一网络中。您可以</font></font><code>Deployment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过调用 来使用此存储库文件夹</font><font style="vertical-align: inherit;">中的 UA-EdgeTranslator.yaml 文件</font></font><code>kubectl apply -f UA-EdgeTranslator.yaml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过 UA Cloud Publisher 的用户界面使用 Azure OpenAI 服务创建 Web of Things (WoT) 事物描述，并将其发送到 UA Edge Translator。</font></font></li>
</ol>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/digitaltwinconsortium/ManufacturingOntologies/blob/main/Docs/translator.jpeg"><img src="/digitaltwinconsortium/ManufacturingOntologies/raw/main/Docs/translator.jpeg" alt="翻译者" width="900" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执照</font></font></h2><a id="user-content-license" class="anchor" aria-label="永久链接：许可证" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="http://creativecommons.org/licenses/by/4.0/" rel="nofollow"><img alt="知识共享许可" src="https://camo.githubusercontent.com/ae0ee1333cd0acfb61ddde585b565eab3fd7f21ac4e299f68402ea611f8faf68/68747470733a2f2f692e6372656174697665636f6d6d6f6e732e6f72672f6c2f62792f342e302f38387833312e706e67" data-canonical-src="https://i.creativecommons.org/l/by/4.0/88x31.png" style="max-width: 100%;"></a></p>
<p dir="auto"><font style="vertical-align: inherit;"></font><a href="http://creativecommons.org/licenses/by/4.0/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本作品根据Creative Commons Attribution 4.0 International License</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得许可</font><font style="vertical-align: inherit;">。</font></font></p>
</article></div>
